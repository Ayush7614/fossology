<Directory "/usr/local/share/fossology/www/ui">
         <IfModule mod_rewrite.c>
                 RewriteEngine on
                 RewriteCond %{REQUEST_FILENAME} !-d
                 RewriteCond %{REQUEST_FILENAME} !-f
                 RewriteRule "^api/(.*)" "/repo/api/index.php" [QSA,L]
                 RewriteRule .* - [env=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
         </IfModule>
 </Directory>
 LoadModule auth_openidc_module modules/mod_auth_openidc.so

 Listen 1880
 <VirtualHost *:1880>
     ServerName  ${CONNECT_SERVICEURL}
     Alias / /usr/local/share/fossology/www/ui/
     SetEnv HTTPS on

     OIDCProviderMetadataURL ${CONNECT_URL}
     OIDCClientID ${CONNECT_CLIENTID}
     OIDCClientSecret ${CONNECT_CLIENTSECRET}
     OIDCCryptoPassphrase ${CONNECT_PASSPHRASE}

     OIDCPassClaimsAs both
     OIDCPassUserInfoAs claims
     OIDCScope "openid profile email"

     # OIDCRedirectURI is a vanity URL that must point to a path protected
     # by this module but must NOT point to any content
     OIDCRedirectURI ${CONNECT_SERVICEURL}/redirect_uri

     DirectoryIndex index.php index.html

     ProxyPreserveHost On
     ProxyRequests Off

     <Location "/">
         AllowOverride None
         AuthType openid-connect
         Require valid-user
         Options FollowSymLinks MultiViews
         php_flag display_errors on
         php_value error_reporting 2039

         order allow,deny
         allow from all
         Options Indexes FollowSymLinks MultiViews
         AllowOverride All
     </Location>

     # To print Actual IP of user, from a reference provided by fron proxy
     # Non working for the moment - but the information is logged in front-enfd proxies if needed
     #LogFormat "%{X-Forwarded-For}i %h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
     #ErrorLog /var/log/apache2/error.fossology.local.log
     #CustomLog /var/log/apache2/access.fossology.local.log combined
 </VirtualHost>